# Study C（統合・広範囲探索）200試行最適化

## Study Cの定義

**Study C: Study A/B統合・広範囲探索**

Study AとStudy Bの範囲を統合し、より広い範囲で探索します。

### パラメータ範囲の統合

| パラメータ | Study A | Study B | Study C（統合） |
|-----------|---------|---------|----------------|
| `w_value` | 0.10-0.50 | 0.20-0.60 | **0.10-0.60** |
| `w_forward_per` | 0.20-0.90 | 0.20-0.80 | **0.20-0.90** |
| `roe_min` | 0.00-0.12 | 0.00-0.20 | **0.00-0.20** |
| `bb_weight` | 0.30-0.95 | 0.20-0.80 | **0.20-0.95** |

### 共通パラメータ（全Study共通）

- `w_quality`: 0.05-0.50
- `w_growth`: 0.01-0.30
- `w_record_high`: 0.01-0.20
- `w_size`: 0.05-0.40
- `liquidity_quantile_cut`: 0.10-0.30
- `rsi_base`: 30.0-70.0
- `rsi_max`: 70.0-85.0
- `bb_z_base`: -3.0-0.0
- `bb_z_max`: 1.0-4.5

## 実行コマンド

```bash
python -m omanta_3rd.jobs.optimize_longterm \
  --start 2020-01-01 \
  --end 2022-12-31 \
  --study-type C \
  --n-trials 200 \
  --n-jobs 1 \
  --bt-workers -1 \
  --train-ratio 0.8 \
  --random-seed 42
```

## 期待される結果

- **より広い探索範囲**: Study AとStudy Bの両方の範囲をカバー
- **200試行**: より多くの試行により、最適解の発見可能性が向上
- **TPEサンプラー**: 良い結果が得られた領域を優先的に探索

## 注意事項

- **実行時間**: 200試行は50試行の約4倍の時間がかかります
- **並列化**: `--n-jobs 1`で実行（DB書き込み競合を避けるため）
- **キャッシュ**: 既存のキャッシュが使用されます（`cache/features/features_2020-01-31_2022-12-30_v1.parquet`）




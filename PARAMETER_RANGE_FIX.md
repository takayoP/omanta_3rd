# パラメータ探索範囲の修正（比較の公平性のため）

## 修正内容

比較の公平性のため、**BBとRSI以外のパラメータは以前と同じ探索範囲に固定**しました。

## 変更前（誤り）

### RSIパラメータ
- `rsi_base`: 30.0-70.0
- `rsi_max`: 30.0-85.0（順序制約なし）← **変更されていた**

### BB Z-scoreパラメータ
- `bb_z_base`: -3.0-3.0（範囲を拡張）← **意図的な変更**
- `bb_z_max`: -3.0-4.5（順序制約なし）← **意図的な変更**

## 変更後（修正済み）

### RSIパラメータ（順張り/逆張り両対応、BBと同様）
- `rsi_base`: 30.0-70.0（変更なし）
- `rsi_max`: 30.0-85.0（順序制約なし、逆張りも探索可能）← **修正**
- 最小幅制約: 5.0

### BB Z-scoreパラメータ（順張り/逆張り両対応）
- `bb_z_base`: -3.0-3.0（範囲を拡張、変更のまま）
- `bb_z_max`: -3.0-4.5（順序制約なし、変更のまま）
- 最小幅制約: 0.3

### その他のパラメータ（すべて以前と同じ範囲に固定）
- `liquidity_quantile_cut`: 0.10-0.30（変更なし）
- `w_quality`: 0.05-0.50（変更なし）
- `w_value`: Study A/B/Cで異なるが、それぞれ以前と同じ（変更なし）
- `w_growth`: 0.01-0.30（変更なし）
- `w_record_high`: 0.01-0.20（変更なし）
- `w_size`: 0.05-0.40（変更なし）
- `w_forward_per`: Study A/B/Cで異なるが、それぞれ以前と同じ（変更なし）
- `roe_min`: Study A/B/Cで異なるが、それぞれ以前と同じ（変更なし）
- `bb_weight`: Study A/B/Cで異なるが、それぞれ以前と同じ（変更なし）

## 修正ファイル

1. **`src/omanta_3rd/jobs/optimize_longterm.py`**
   - RSIパラメータの範囲を以前と同じに戻した
   - コメントを修正（「BBとRSI以外は以前と同じ範囲」と明記）

2. **`src/omanta_3rd/jobs/optimize_timeseries.py`**
   - RSIパラメータの範囲を以前と同じに戻した

## 比較の公平性

- **RSI**: 順張り/逆張り両対応（変更）← **修正済み**
- **BB**: 順張り/逆張り両対応（変更）
- **その他のパラメータ**: すべて以前と同じ範囲

これにより、RSIとBBの順張り/逆張り対応がパフォーマンスに与える影響を正確に評価できます。

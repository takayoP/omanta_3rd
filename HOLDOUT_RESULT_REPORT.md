# Holdout検証結果レポート

**実行日時**: 2026-01-01  
**最適化スタディ**: optimization_timeseries_studyB_20251231_174014  
**Holdout期間**: 2023-01-01 ～ 2024-12-31  
**評価候補数**: 10件（200 trialから選定）

---

## 1. 検証概要

### 1.1 検証設計

- **訓練期間**: 2020-01-01 ～ 2022-12-31（最適化に使用）
- **Holdout期間**: 2023-01-01 ～ 2024-12-31（未使用データでの検証）
- **評価対象**: 200 trialから選定された10件の候補パラメータ
- **選定方法**: K-meansクラスタリングによる多様性を考慮した選定

### 1.2 評価指標

- **Sharpe Ratio (Sharpe_excess)**: 超過リターンの年率化Sharpe比率（主要指標）
- **CAGR**: 年率換算リターン
- **Mean Return**: 平均月次リターン
- **Mean Excess Return**: 平均月次超過リターン
- **Volatility**: 年率換算ボラティリティ
- **Max Drawdown**: 最大ドローダウン
- **Sortino Ratio**: 下方リスクを考慮したリスク調整リターン
- **Win Rate**: 月次勝率
- **Profit Factor**: 利益/損失比

---

## 2. Holdout検証結果サマリー

### 2.1 全体統計

| 指標 | 平均 | 中央値 | 最小値 | 最大値 | 標準偏差 |
|------|------|--------|--------|--------|----------|
| **Holdout Sharpe** | - | - | - | - | - |
| **Train Sharpe** | - | - | - | - | - |
| **ギャップ (Train - Holdout)** | - | - | - | - | - |
| **CAGR** | - | - | - | - | - |
| **Volatility** | - | - | - | - | - |
| **Max Drawdown** | - | - | - | - | - |

### 2.2 成功基準の評価

- ✅ **Holdout Sharpe > 0.10**: - / 10件
- ✅ **Holdout Sharpe > 0.20**: - / 10件
- ⚠️ **過学習の兆候**: Train SharpeとHoldout Sharpeのギャップが大きい候補

### 2.3 個別候補の結果

| Trial # | Train Sharpe | Holdout Sharpe | ギャップ | CAGR | Volatility | Max DD | 評価 |
|---------|--------------|----------------|----------|------|------------|--------|------|
| #156 | - | - | - | - | - | - | - |
| #126 | - | - | - | - | - | - | - |
| #196 | - | - | - | - | - | - | - |
| #137 | - | - | - | - | - | - | - |
| #180 | - | - | - | - | - | - | - |
| #96 | - | - | - | - | - | - | - |
| #80 | - | - | - | - | - | - | - |
| #82 | - | - | - | - | - | - | - |
| #168 | - | - | - | - | - | - | - |
| #105 | - | - | - | - | - | - | - |

---

## 3. 主要な発見

### 3.1 パフォーマンスの一般化

- **Train期間での性能**: 上位候補はTrain期間でSharpe 0.75-0.98を達成
- **Holdout期間での性能**: [結果ファイルの内容に基づいて記入]
- **一般化能力**: [結果ファイルの内容に基づいて記入]

### 3.2 過学習の評価

- **ギャップ分析**: Train SharpeとHoldout Sharpeの差を分析
- **過学習の兆候**: [結果ファイルの内容に基づいて記入]
- **頑健性の評価**: [結果ファイルの内容に基づいて記入]

### 3.3 パラメータの安定性

- **最良候補のパラメータ**: [結果ファイルの内容に基づいて記入]
- **パラメータ範囲**: [結果ファイルの内容に基づいて記入]
- **安定性の評価**: [結果ファイルの内容に基づいて記入]

---

## 4. 次のステップ

### 4.1 推奨アクション

1. **WFA（Walk-Forward Analysis）の実施**
   - より厳密な時系列検証
   - 複数の訓練期間と検証期間での評価

2. **最良候補の詳細分析**
   - パラメータの解釈
   - リスク要因の分析

3. **追加の検証**
   - 異なる市場環境での検証
   - 取引コストを考慮した検証

### 4.2 注意事項

- [結果ファイルの内容に基づいて記入]
- [結果ファイルの内容に基づいて記入]

---

## 5. 技術的な詳細

### 5.1 検証方法

- **スクリプト**: `evaluate_candidates_holdout.py`
- **並列化**: 候補レベルとリバランス日レベルの2階層並列化
- **キャッシュ**: FeatureCacheを使用して特徴量と価格データを事前計算

### 5.2 計算ロジック

- **リターン計算**: 月次リバランス方式（open-close方式）
- **取引コスト**: [設定値] bps
- **ベンチマーク**: TOPIX（超過リターン計算に使用）

---

---

## 6. 補足情報

### 6.1 結果ファイルの確認方法

Holdout結果ファイルは、`evaluate_candidates_holdout.py`実行時に`--output`オプションで指定したパスに保存されます。
デフォルトでは保存されないため、結果を確認するには`--output`オプションを指定して再実行するか、
標準出力に表示された結果を確認してください。

### 6.2 結果ファイルの形式

結果ファイルは以下のJSON形式で保存されます：

```json
{
  "config": {
    "candidates_file": "candidates_studyB_20251231_174014.json",
    "holdout_start": "2023-01-01",
    "holdout_end": "2024-12-31",
    "cost_bps": 0.0,
    "n_candidates": 10
  },
  "results": [
    {
      "trial_number": 156,
      "train_sharpe": 0.9832,
      "holdout_metrics": {
        "sharpe_ratio": ...,
        "cagr": ...,
        "volatility": ...,
        ...
      },
      "params": {...}
    },
    ...
  ]
}
```

**注意**: このレポートはテンプレートです。実際のHoldout結果ファイルの内容を反映して更新してください。


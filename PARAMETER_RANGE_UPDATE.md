# パラメータ探索範囲の更新

## 変更内容

### RSIパラメータ

**変更前**:
- 探索範囲: 30.0-85.0
- 最小幅: 5.0
- 最大幅: 55.0

**変更後**:
- 探索範囲: **15.0-85.0**
- 最小幅: **20.0**
- 最大幅: **70.0** (85.0 - 15.0)

### BB Z-scoreパラメータ

**変更前**:
- 探索範囲: -3.0-4.5（optimize_longterm）、-2.0-3.5（optimize_timeseries）
- 最小幅: 0.3
- 最大幅: 7.5（optimize_longterm）、5.5（optimize_timeseries）

**変更後**:
- 探索範囲: **-3.5-3.5**（両方とも統一）
- 最小幅: **1.0**
- 最大幅: **7.0** (3.5 - (-3.5))

## 変更の効果

### RSI

1. **探索範囲の拡大**: 15.0-85.0（以前は30.0-85.0）
   - より低いRSI値も探索可能
   - 逆張り戦略でより低いRSIを探索できる

2. **最小幅の拡大**: 5.0 → 20.0
   - より安定したスコア計算
   - ノイズに対する耐性が向上
   - より明確な順張り/逆張りの区別

### BB Z-score

1. **探索範囲の対称化**: -3.5-3.5（完全に対称）
   - 以前は非対称（-3.0-4.5など）
   - 順張り/逆張りが完全に対称に探索可能

2. **最小幅の拡大**: 0.3 → 1.0
   - より安定したスコア計算
   - ノイズに対する耐性が向上
   - より明確な順張り/逆張りの区別

## 実際の幅の範囲

| パラメータ | 最小幅 | 最大幅 | 探索範囲 |
|-----------|--------|--------|---------|
| RSI (longterm) | **20.0** | **70.0** | 15.0-85.0 |
| RSI (timeseries) | **20.0** | **70.0** | 15.0-85.0 |
| BB Z-score (longterm) | **1.0** | **7.0** | -3.5-3.5 |
| BB Z-score (timeseries) | **1.0** | **7.0** | -3.5-3.5 |

## 修正ファイル

1. **`src/omanta_3rd/jobs/optimize.py`**
   - `EntryScoreParams`のデフォルト値を更新

2. **`src/omanta_3rd/jobs/optimize_longterm.py`**
   - RSI探索範囲: 15.0-85.0
   - RSI最小幅: 20.0
   - BB探索範囲: -3.5-3.5
   - BB最小幅: 1.0

3. **`src/omanta_3rd/jobs/optimize_timeseries.py`**
   - RSI探索範囲: 15.0-85.0
   - RSI最小幅: 20.0
   - BB探索範囲: -3.5-3.5
   - BB最小幅: 1.0

## 注意点

### 最小幅が大きくなった影響

**RSI最小幅: 5.0 → 20.0**
- より広い幅が必要になる
- より安定したスコア計算が可能
- ただし、探索空間がやや制限される

**BB最小幅: 0.3 → 1.0**
- より広い幅が必要になる
- より安定したスコア計算が可能
- 探索範囲が-3.5-3.5なので、最大幅7.0に対して最小幅1.0は妥当

### 探索範囲の拡大

**RSI: 30.0-85.0 → 15.0-85.0**
- より低いRSI値も探索可能
- 逆張り戦略でより効果的

**BB: -3.0-4.5 → -3.5-3.5**
- 完全に対称
- 順張り/逆張りが完全に対称に探索可能














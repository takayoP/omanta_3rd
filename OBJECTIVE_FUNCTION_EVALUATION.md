# 投資アルゴリズムのスコア評価基準

## 目的関数の計算式

```python
objective_value = (
    mean_excess_return * 0.7
    + win_rate * 10.0 * 0.2  # 勝率を10倍してスケール調整
    + sharpe_ratio * 0.1
)
```

## 各要素の説明

### 1. mean_excess_return（平均超過リターン）
- **定義**: ポートフォリオのリターン - TOPIXのリターン（%ポイント）
- **重み**: 0.7（70%）
- **評価基準**:
  - **+5%以上**: 優秀（年率5%以上の超過リターン）
  - **+2%〜+5%**: 良好（年率2-5%の超過リターン）
  - **0%〜+2%**: 普通（TOPIXをわずかに上回る）
  - **-2%〜0%**: やや劣る（TOPIXをわずかに下回る）
  - **-5%〜-2%**: 劣る（年率2-5%のアンダーパフォーマンス）
  - **-5%以下**: 不良（年率5%以上のアンダーパフォーマンス）

### 2. win_rate（勝率）
- **定義**: TOPIXを上回った期間の割合（0.0〜1.0）
- **重み**: 0.2（20%）、ただし10倍してスケール調整（実質0〜2.0の範囲）
- **評価基準**:
  - **0.6以上（60%以上）**: 優秀（6割以上の期間でTOPIXを上回る）
  - **0.55〜0.6（55-60%）**: 良好（5.5割以上の期間でTOPIXを上回る）
  - **0.5〜0.55（50-55%）**: 普通（約半分の期間でTOPIXを上回る）
  - **0.45〜0.5（45-50%）**: やや劣る（約半分以下の期間でTOPIXを上回る）
  - **0.45以下（45%以下）**: 劣る（TOPIXを上回る期間が少ない）

### 3. sharpe_ratio（簡易シャープレシオ）
- **定義**: 超過リターンの平均 / 標準偏差（リスク調整後リターン）
- **重み**: 0.1（10%）
- **評価基準**:
  - **+1.0以上**: 優秀（リスク調整後でも高いリターン）
  - **+0.5〜+1.0**: 良好（リスク調整後でもプラスのリターン）
  - **0.0〜+0.5**: 普通（リスク調整後はほぼゼロ）
  - **-0.5〜0.0**: やや劣る（リスク調整後はマイナス）
  - **-0.5以下**: 劣る（リスク調整後は大きくマイナス）

## 目的関数の総合評価基準

### 計算例

#### 例1: 優秀なアルゴリズム
- mean_excess_return: +5.0%
- win_rate: 0.6（60%）
- sharpe_ratio: +1.0

```
objective = 5.0 * 0.7 + 0.6 * 10 * 0.2 + 1.0 * 0.1
         = 3.5 + 1.2 + 0.1
         = +4.8
```

#### 例2: 良好なアルゴリズム
- mean_excess_return: +2.0%
- win_rate: 0.55（55%）
- sharpe_ratio: +0.5

```
objective = 2.0 * 0.7 + 0.55 * 10 * 0.2 + 0.5 * 0.1
         = 1.4 + 1.1 + 0.05
         = +2.55
```

#### 例3: 普通のアルゴリズム
- mean_excess_return: 0.0%
- win_rate: 0.5（50%）
- sharpe_ratio: 0.0

```
objective = 0.0 * 0.7 + 0.5 * 10 * 0.2 + 0.0 * 0.1
         = 0.0 + 1.0 + 0.0
         = +1.0
```

#### 例4: 現在の結果（試行7）
- mean_excess_return: 約-6.0%（推定）
- win_rate: 約0.5（推定）
- sharpe_ratio: 約-0.5（推定）

```
objective = -6.0 * 0.7 + 0.5 * 10 * 0.2 + (-0.5) * 0.1
         = -4.2 + 1.0 - 0.05
         = -3.25（実際は-4.1678）
```

### 総合評価基準

| 目的関数の値 | 評価 | 説明 |
|------------|------|------|
| **+3.0以上** | 優秀 | TOPIXを大幅に上回り、安定したパフォーマンス |
| **+1.0〜+3.0** | 良好 | TOPIXを上回り、実用的なアルゴリズム |
| **0.0〜+1.0** | 普通 | TOPIXと同等かわずかに上回る |
| **-1.0〜0.0** | やや劣る | TOPIXをわずかに下回る |
| **-3.0〜-1.0** | 劣る | TOPIXを下回るが、改善の余地あり |
| **-3.0以下** | 不良 | TOPIXを大きく下回る |

## 現在の結果（試行7: -4.1678）の評価

### 内訳の推定
- mean_excess_return: 約-6.0%（TOPIXを約6%下回る）
- win_rate: 約0.5（50%の期間でTOPIXを上回る）
- sharpe_ratio: 約-0.5（リスク調整後はマイナス）

### 評価
- **現状**: 劣る（-3.0以下）
- **改善の余地**: 大きい（最適化により改善可能）
- **見通し**: 試行を重ねることで、+1.0以上を目指せる可能性がある

## 目標値の設定

### 短期目標
- **目的関数: +1.0以上**（TOPIXと同等かわずかに上回る）
- mean_excess_return: +1.0%以上
- win_rate: 0.5以上（50%以上）

### 中期目標
- **目的関数: +2.0以上**（TOPIXを上回り、実用的）
- mean_excess_return: +2.0%以上
- win_rate: 0.55以上（55%以上）

### 長期目標
- **目的関数: +3.0以上**（TOPIXを大幅に上回る）
- mean_excess_return: +3.0%以上
- win_rate: 0.6以上（60%以上）
- sharpe_ratio: +0.5以上

## 注意事項

1. **期間による変動**: バックテスト期間によって結果が変動する可能性がある
2. **過学習のリスク**: 最適化により過学習が発生する可能性がある
3. **実運用との差異**: バックテスト結果と実運用結果には差異が生じる可能性がある
4. **リスク管理**: リターンだけでなく、リスク（ボラティリティ、最大ドローダウン）も考慮する必要がある





